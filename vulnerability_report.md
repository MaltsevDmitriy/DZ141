# Vulnerability Report - nVisium Task Manager
#### Reviewer 1: Mike Harrison
#### Reviewer 2: Rick Tesmond

#### April, 2016
________________________________________

## Injection
###Exposure
We found an a vulnerability for sql injection within the `upload` function in views.py. The code uses `curs.execute` which does not utilize any validation.

By Exploiting injection, we were able to name our project file `DROP TABLE user` which subsequently dropped all users from the database.

###Repair
In the Upload view, we replaced 
```
            curs.execute(
                "insert into taskManager_file ('name','path','project_id') values ('%s','%s',%s)" %
                (name, upload_path, project_id))
```
with 
```
            file = File(
                name=name,
                path=upload_path,
                project=proj)
            file.save()
```
because using curs.execute directly impacts the Django ORM and bypasses the built in checks. By using the common ORM, we ensure the file information is checked before it is submitted. We tested this with multiple injection attempts.

__________________________________________________
## Broken Auth
###Exposure
We found an instance of  by typing______

By Exploiting injection, we were able to do _______

###Repair
__________________________________________________
## XSS
###Exposure
We found instances of Cross Site Scripting in many locations designated by {{ something |safe}} (ex. `<a href="/taskManager/search/?q={{q|safe}}" id="loading-btn" class="btn btn-warning btn-xs"><i class="fa fa-refresh"></i> Refresh</a>`) in multiple locations on the site. Namely the base_backend.html, search, edit profile, and album edit. 

By Exploiting injection, we were able to manipulate html by running script commands such as `name"><script>alert("HAHAHAHAH")</script>` in many of the fields to create a screen alert.

###Repair
We fixed this by finding all the possible areas of XSS, like,
```
<span class="username"><i class="fa fa-user fa-fw"></i> {{ user.username|safe }}</span>
```
and removed the `|safe` decorator in the script, like so,
```
<span class="username"><i class="fa fa-user fa-fw"></i> {{ user.username}}</span>
```
This allowed us to still enter scripts but the script did not execute like it did before.

__________________________________________________
## Insecure DOR
###Exposure
We found an instance of injection by typing______

By Exploiting injection, we were able to do _______

###Repair


__________________________________________________
